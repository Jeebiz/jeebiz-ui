layui.define(function(e){layui.use(["admin","table","util"],function(){function e(e){return 1==e.status?"":'<i class="layui-icon layui-icon-tips" title="\u672a\u8bfb"></i>'}function t(e){return'<a href="detail/'+e.id+'">'+e.title}var a=layui.$,m=layui.admin,r=layui.setter,d=layui.table,n=(layui.element,{all:{text:"\u5168\u90e8\u6d88\u606f",id:"LAY-app-message-all"},notice:{text:"\u901a\u77e5",id:"LAY-app-message-notice"},direct:{text:"\u79c1\u4fe1",id:"LAY-app-message-direct"}});d.render({elem:"#LAY-app-message-all",url:layui.setter.prefix+"extras/inform/list",page:!0,method:"POST",request:{pageName:"pageNo",limitName:"limit"},response:{countName:"total",dataName:"rows",statusName:"code",statusCode:0,msgName:"message"},cols:[[{type:"checkbox",fixed:"left"},{field:"status",title:"",width:35,templet:e},{field:"title",title:"\u6807\u9898\u5185\u5bb9",minWidth:300,templet:t},{field:"time",title:"\u65f6\u95f4",width:170,templet:"<div>{{ layui.util.timeAgo(d.timestamp) }}</div>"}]],skin:"line"}),d.render({elem:"#LAY-app-message-notice",url:layui.setter.prefix+"extras/inform/list?type=notice",page:!0,method:"POST",request:{pageName:"pageNo",limitName:"limit"},response:{countName:"total",dataName:"rows",statusName:"code",statusCode:0,msgName:"message"},cols:[[{type:"checkbox",fixed:"left"},{field:"status",title:"",width:35,templet:e},{field:"title",title:"\u6807\u9898\u5185\u5bb9",minWidth:300,templet:t},{field:"time",title:"\u65f6\u95f4",width:170,templet:"<div>{{ layui.util.timeAgo(d.timestamp) }}</div>"}]],skin:"line"}),d.render({elem:"#LAY-app-message-direct",url:layui.setter.prefix+"extras/inform/list?type=direct",page:!0,method:"POST",request:{pageName:"pageNo",limitName:"limit"},response:{countName:"total",dataName:"rows",statusName:"code",statusCode:0,msgName:"message"},cols:[[{type:"checkbox",fixed:"left"},{field:"status",title:"",width:35,templet:e},{field:"title",title:"\u6807\u9898\u5185\u5bb9",minWidth:300,templet:t},{field:"time",title:"\u65f6\u95f4",width:170,templet:"<div>{{ layui.util.timeAgo(d.timestamp) }}</div>"}]],skin:"line"});var s={del:function(e,t){var a=n[t],s=d.checkStatus(a.id).data;if(0===s.length)return layer.msg("\u672a\u9009\u4e2d\u884c");layer.confirm("\u786e\u5b9a\u5220\u9664\u9009\u4e2d\u7684\u6570\u636e\u5417\uff1f",function(){var e=[];for(i in s)e.push(s[i].id);m.req({url:r.prefix+"extras/inform/delete",type:"post",data:{ids:e.join(",")},success:function(e){"success"==e.status?(layer.msg(e.msg||"",{icon:2}),d.reload(a.id)):layer.msg(e.msg||"",{icon:2})}})})},ready:function(e,t){var a=n[t],s=d.checkStatus(a.id).data;if(0===s.length)return layer.msg("\u672a\u9009\u4e2d\u884c");var l=[];for(i in s)l.push(s[i].id);m.req({url:r.prefix+"extras/inform/read",type:"post",data:{ids:l.join(",")},success:function(e){"success"==e.status?(layer.msg(e.msg||"",{icon:2}),d.reload(a.id)):layer.msg(e.msg||"",{icon:2})}})},readyAll:function(e,t){var i=n[t];m.req({url:r.prefix+"extras/inform/readall",type:"post",success:function(e){"success"==e.status?(layer.msg(e.msg||"",{icon:2}),d.reload(i.id)):layer.msg(e.msg||"",{icon:2})}})}};a(".LAY-app-message-btns .layui-btn").on("click",function(){var e=a(this),t=e.data("events"),i=e.data("type");s[t]&&s[t].call(this,e,i)})}),e("message",{})});