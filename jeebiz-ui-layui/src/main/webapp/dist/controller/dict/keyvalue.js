layui.define(["table","form"],function(e){var i=layui.$,s=layui.setter,l=layui.admin,n=layui.table,t=layui.form;t.render(),n.render(l.wrap({elem:"#LAY-keyvalue-list",url:s.prefix+"/dict/keyvalue/list",contentType:"application/json",page:!0,method:"POST",cols:[[{type:"checkbox",fixed:"left"},{field:"gtext",title:"\u5b57\u5178\u7c7b\u578b",minWidth:100},{field:"key",title:"\u5b57\u5178\u540d\u79f0",minWidth:80},{field:"value",title:"\u5b57\u5178\u952e\u503c\uff08\u53ef\u7f16\u8f91\uff09",minWidth:100,edit:"text"},{field:"status",title:"\u5b57\u5178\u72b6\u6001",templet:"#switchTpl",unresize:!0,minWidth:80,align:"center"},{field:"orderBy",title:"\u663e\u793a\u987a\u5e8f",width:100},{title:"\u64cd\u4f5c",width:80,align:"center",fixed:"right",toolbar:"#table-opt-list"}]],skin:"line"})),t.on("submit(LAY-keyvalue-search)",function(e){e=e.field;n.reload("LAY-keyvalue-list",{where:e,page:{curr:1}})}),n.on("edit(LAY-keyvalue-list)",function(e){var t=e.value,i=e.data,e=e.field,i={id:i.id,gkey:i.gkey,label:"label"==e?t:i.label,key:i.key,value:"value"==e?t:i.value,status:i.status,orderBy:i.orderBy};l.req({url:s.prefix+"/dict/keyvalue/renew",type:"POST",contentType:"application/json",data:JSON.stringify(i),success:function(e){"success"==e.status?layer.msg(e.message||"",{icon:1}):layer.msg(e.message||"",{icon:2})}})}),t.on("switch(statusKv)",function(e){this.value;var t=i(e.elem).data("id");l.req({url:s.prefix+"/dict/keyvalue/status",type:"post",contentType:"application/json",dataType:"json",data:JSON.stringify({id:t,status:e.elem.checked?"1":"0"}),success:function(e){"success"==e.status?layer.msg(e.message||"",{icon:1}):layer.msg(e.message||"",{icon:2})}})}),n.on("tool(LAY-keyvalue-list)",function(e){var i=e.data.id;"del"===e.event&&layer.confirm("\u786e\u5b9a\u5220\u9664\u5f53\u524d\u7684\u6570\u636e\u5417\uff1f",function(t){l.req({url:s.prefix+"/dict/keyvalue/delete",type:"post",data:{ids:i},success:function(e){"success"==e.status?(layer.msg(e.message||"",{icon:1}),n.reload("LAY-keyvalue-list")):layer.msg(e.message||"",{icon:2}),layer.close(t)}})})});var a={add:function(){layer.open({type:2,title:"\u65b0\u5efa\u57fa\u7840\u6570\u636e",content:"/src/views/dict/keyvalue/new.html",area:["600px","400px"],btn:["\u786e\u5b9a","\u53d6\u6d88"],yes:function(t,e){var i=window["layui-layer-iframe"+t],a="LAY-keyvalue-forum-submit",e=e.find("iframe").contents().find("#"+a);i.layui.form.on("submit("+a+")",function(e){e=e.field;l.req({url:s.prefix+"/dict/keyvalue/new",type:"post",contentType:"application/json",dataType:"json",data:JSON.stringify(e),success:function(e){"success"==e.status?(layer.msg(e.message||"",{icon:1}),n.reload("LAY-keyvalue-list"),layer.close(t)):layer.msg(e.message||"",{icon:2})},error:function(e){layer.msg(e.message||"",{icon:2})}})}),e.trigger("click")}})}};i(".layui-btn.layuiadmin-btn-admin").on("click",function(){var e=i(this).data("type");a[e]&&a[e].call(this)}),e("keyvalue",{})});