layui.define(["table","form"],function(e){var l=layui.$,a=layui.setter,s=layui.admin,n=layui.table,t=layui.form;n.render({elem:"#LAY-logbiz-list",url:a.prefix+"extras/logbiz/list",contentType:"application/json",page:!0,method:"POST",request:{pageName:"pageNo",limitName:"limit"},response:{countName:"total",dataName:"rows",statusName:"code",statusCode:0,msgName:"message"},cols:[[{type:"checkbox",fixed:"left"},{field:"name",title:"\u6570\u636e\u6e90\u6807\u9898"},{field:"dbtype",title:"\u6570\u636e\u6e90\u7c7b\u578b",templet:function(i){var a=i.dbtype;return l("#LAY-dbtype option").each(function(e,t){if(l(this).val()==i.dbtype)return a=l(this).text(),console.log("dbtype:"+a),!1}),a}},{field:"time24",title:"\u6ce8\u518c\u65f6\u95f4",width:170,edit:"text"},{field:"status",title:"\u6570\u636e\u6e90\u72b6\u6001",templet:"#switchTpl",unresize:!0,width:100,align:"center"},{title:"\u64cd\u4f5c",minWidth:80,align:"center",fixed:"right",toolbar:"#table-opt-list"}]],skin:"line"}),t.on("submit(LAY-logbiz-search)",function(e){e=e.field;n.reload("LAY-logbiz-list",{where:e,page:{curr:1}})}),t.on("switch(statusDs)",function(e){this.value;var t=l(e.elem).data("id");s.req({url:a.prefix+"extras/logbiz/status",type:"post",data:{id:t,status:e.elem.checked?"1":"0"},success:function(e){"success"==e.status?layer.msg(e.msg||"",{icon:1}):layer.msg(e.msg||"",{icon:2})}})}),n.on("tool(LAY-logbiz-list)",function(e){var i=e.data.id;"del"===e.event?layer.confirm("\u786e\u5b9a\u5220\u9664\u5f53\u524d\u7684\u6570\u636e\u5417\uff1f",function(t){s.req({url:a.prefix+"extras/logbiz/delete",type:"post",data:{ids:i},success:function(e){"success"==e.status?(layer.msg(e.msg||"",{icon:2}),n.reload("LAY-logbiz-list")):layer.msg(e.msg||"",{icon:2}),layer.close(t)}})}):"detail"===e.event&&l.get(a.prefix+"extras/logbiz/ui/detail/"+i,{},function(e){layer.open({type:1,area:["700px","600px"],content:e})})});var o={batchdel:function(){var t=n.checkStatus("LAY-logbiz-list").data;if(0===t.length)return layer.msg("\u8bf7\u9009\u62e9\u6570\u636e");layer.confirm("\u786e\u5b9a\u5220\u9664\u9009\u4e2d\u7684\u6570\u636e\u5417\uff1f",function(){var e=[];for(i in t)e.push(t[i].id);s.req({url:a.prefix+"extras/logbiz/delete",type:"post",data:{ids:e.join(",")},success:function(e){"success"==e.status?(layer.msg(e.msg||"",{icon:2}),n.reload("LAY-logbiz-list")):layer.msg(e.msg||"",{icon:2})}})})},add:function(){layer.open({type:2,title:"\u6dfb\u52a0\u7ba1\u7406\u5458",content:"adminform.html",area:["420px","420px"],btn:["\u786e\u5b9a","\u53d6\u6d88"],yes:function(t,e){var i=window["layui-layer-iframe"+t],a="LAY-user-back-submit",e=e.find("iframe").contents().find("#"+a);i.layui.form.on("submit("+a+")",function(e){e.field;n.reload("LAY-user-front-submit"),layer.close(t)}),e.trigger("click")}})}};l(".layui-btn.layuiadmin-btn-admin").on("click",function(){var e=l(this).data("type");o[e]&&o[e].call(this)}),e("logbiz",{})});