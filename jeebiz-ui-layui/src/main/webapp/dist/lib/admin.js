layui.define(["view","table","upload"],function(e){var a,c=layui.jquery,s=layui.laytpl,t=layui.element,i=layui.table,n=layui.upload,r=layui.setter,l=layui.view,o=layui.device(),u=c(window),d=c("body"),y=c("#"+r.container),m="layui-show",h="layui-this",f="layui-disabled",p="#LAY_app_body",v="LAY_app_flexible",b="layadmin-side-spread-sm",g="layadmin-tabsbody-item",x="layui-icon-shrink-right",C="layui-icon-spread-left",k="layadmin-side-shrink",F={v:"1.7.1 pro",req:l.req,wrap:l.wrap,exit:l.exit,escape:function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},on:function(e,a){return layui.onevent.call(this,r.MOD_NAME,e,a)},popup:l.popup,popupRight:function(e){return F.popup.index=layer.open(c.extend({type:1,id:"LAY_adminPopupR",anim:-1,title:!1,closeBtn:!1,offset:"r",shade:.1,shadeClose:!0,skin:"layui-anim layui-anim-rl layui-layer-adminRight",area:"300px"},e))},sendAuthCode:function(i){var t,n=(i=c.extend({seconds:60,elemPhone:"#LAY_phone",elemVercode:"#LAY_vercode"},i)).seconds,l=function(e){var a=c(i.elem);--n<0?(a.removeClass(f).html("\u83b7\u53d6\u9a8c\u8bc1\u7801"),n=i.seconds,clearInterval(t)):a.addClass(f).html(n+"\u79d2\u540e\u91cd\u83b7"),e||(t=setInterval(function(){l(!0)},1e3))};d.off("click",i.elem).on("click",i.elem,function(){i.elemPhone=c(i.elemPhone),i.elemVercode=c(i.elemVercode);var a,e=i.elemPhone,t=e.val();if(n===i.seconds&&!c(this).hasClass(f)){if(!/^1\d{10}$/.test(t))return e.focus(),layer.msg("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7");"object"==typeof i.ajax&&(a=i.ajax.success,delete i.ajax.success),F.req(c.extend(!0,{url:"/auth/code",type:"get",data:{phone:t},success:function(e){layer.msg("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u81f3\u4f60\u7684\u624b\u673a\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536",{icon:1,shade:0}),i.elemVercode.focus(),l(),a&&a(e)}},i.ajax))}})},screen:function(){var e=u.width();return 1200<e?3:992<e?2:768<e?1:0},sideFlexible:function(e){var a=y,t=c("#"+v),i=F.screen();"spread"===e?(t.removeClass(C).addClass(x),i<2?a.addClass(b):a.removeClass(b),a.removeClass(k)):(t.removeClass(x).addClass(C),i<2?a.removeClass(k):a.addClass(k),a.removeClass(b)),layui.event.call(this,r.MOD_NAME,"side({*})",{status:e})},resizeTable:function(e){function a(){t.tabsBody(F.tabsPage.index).find(".layui-table-view").each(function(){var e=c(this).attr("lay-id");layui.table.resize(e)})}var t=this;layui.table&&(e?setTimeout(a,e):a())},theme:function(e){r.theme;var t=layui.data(r.tableName),a="LAY_layadmin_theme",i=document.createElement("style"),n=s([".layui-side-menu,",".layadmin-pagetabs .layui-tab-title li:after,",".layadmin-pagetabs .layui-tab-title li.layui-this:after,",".layui-layer-admin .layui-layer-title,",".layadmin-side-shrink .layui-side-menu .layui-nav>.layui-nav-item>.layui-nav-child","{background-color:{{d.color.main}} !important;}",".layui-nav-tree .layui-this,",".layui-nav-tree .layui-this>a,",".layui-nav-tree .layui-nav-child dd.layui-this,",".layui-nav-tree .layui-nav-child dd.layui-this a","{background-color:{{d.color.selected}} !important;}",".layui-layout-admin .layui-logo{background-color:{{d.color.logo || d.color.main}} !important;}","{{# if(d.color.header){ }}",".layui-layout-admin .layui-header{background-color:{{ d.color.header }};}",".layui-layout-admin .layui-header a,",".layui-layout-admin .layui-header a cite{color: #f8f8f8;}",".layui-layout-admin .layui-header a:hover{color: #fff;}",".layui-layout-admin .layui-header .layui-nav .layui-nav-more{border-top-color: #fbfbfb;}",".layui-layout-admin .layui-header .layui-nav .layui-nav-mored{border-color: transparent; border-bottom-color: #fbfbfb;}",".layui-layout-admin .layui-header .layui-nav .layui-this:after, .layui-layout-admin .layui-header .layui-nav-bar{background-color: #fff; background-color: rgba(255,255,255,.5);}",".layadmin-pagetabs .layui-tab-title li:after{display: none;}","{{# } }}"].join("")).render(e=c.extend({},t.theme,e)),l=document.getElementById(a);"styleSheet"in i?(i.setAttribute("type","text/css"),i.styleSheet.cssText=n):i.innerHTML=n,i.id=a,l&&d[0].removeChild(l),d[0].appendChild(i),d.attr("layadmin-themealias",e.color.alias),t.theme=t.theme||{},layui.each(e,function(e,a){t.theme[e]=a}),layui.data(r.tableName,{key:"theme",value:t.theme})},initTheme:function(e){var a=r.theme;a.color[e=e||0]&&(a.color[e].index=e,F.theme({color:a.color[e]}))},tabsPage:{},tabsHeader:function(e){return c("#LAY_app_tabsheader").children("li").eq(e||0)},tabsBody:function(e){return c(p).find("."+g).eq(e||0)},tabsBodyChange:function(e){F.tabsHeader(e).attr("lay-attr",layui.router().href),F.tabsBody(e).addClass(m).siblings().removeClass(m),z.rollPage("auto",e)},resize:function(e){var a=layui.router().path.join("-");F.resizeFn[a]&&(u.off("resize",F.resizeFn[a]),delete F.resizeFn[a]),"off"!==e&&(e(),F.resizeFn[a]=e,u.on("resize",F.resizeFn[a]))},resizeFn:{},runResize:function(){var e=layui.router().path.join("-");F.resizeFn[e]&&F.resizeFn[e]()},delResize:function(){this.resize("off")},closeThisTabs:function(){F.tabsPage.index&&c(P).eq(F.tabsPage.index).find(".layui-tab-close").trigger("click")},fullScreen:function(){var e=document.documentElement,a=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;void 0!==a&&a&&a.call(e)},exitScreen:function(){document.documentElement;document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},correctRouter:function(e){return(e=!/^\//.test(e)?"/"+e:e).replace(/^(\/+)/,"/").replace(new RegExp("/"+r.entry+"$"),"/")}},z=F.events={flexible:function(e){e=e.find("#"+v).hasClass(C);F.sideFlexible(e?"spread":null),F.resizeTable(350)},refresh:function(){layui.index.render()},serach:function(t){t.off("keypress").on("keypress",function(e){var a;this.value.replace(/\s/g,"")&&13===e.keyCode&&(a=t.attr("lay-action"),e=t.attr("lay-text")||"\u641c\u7d22",a+=this.value,e=e+' <span style="color: #FF5722;">'+F.escape(this.value)+"</span>",location.hash=F.correctRouter(a),z.serach.keys||(z.serach.keys={}),z.serach.keys[F.tabsPage.index]=this.value,this.value===z.serach.keys[F.tabsPage.index]&&z.refresh(t),this.value="")})},message:function(e){e.find(".layui-badge-dot").remove()},theme:function(){F.popupRight({id:"LAY_adminPopupTheme",success:function(){l(this.id).render("system/theme")}})},note:function(e){var a=F.screen()<2,t=layui.data(r.tableName).note;z.note.index=F.popup({title:"\u4fbf\u7b7e",shade:0,offset:["41px",a?null:e.offset().left-250+"px"],anim:-1,id:"LAY_adminNote",skin:"layadmin-note layui-anim layui-anim-upbit",content:'<textarea placeholder="\u5185\u5bb9"></textarea>',resize:!1,success:function(e,a){e.find("textarea").val(void 0===t?"\u4fbf\u7b7e\u4e2d\u7684\u5185\u5bb9\u4f1a\u5b58\u50a8\u5728\u672c\u5730\uff0c\u8fd9\u6837\u5373\u4fbf\u4f60\u5173\u6389\u4e86\u6d4f\u89c8\u5668\uff0c\u5728\u4e0b\u6b21\u6253\u5f00\u65f6\uff0c\u4f9d\u7136\u4f1a\u8bfb\u53d6\u5230\u4e0a\u4e00\u6b21\u7684\u8bb0\u5f55\u3002\u662f\u4e2a\u975e\u5e38\u5c0f\u5de7\u5b9e\u7528\u7684\u672c\u5730\u5907\u5fd8\u5f55":t).focus().on("keyup",function(){layui.data(r.tableName,{key:"note",value:this.value})})}})},fullscreen:function(e){var a="layui-icon-screen-full",t="layui-icon-screen-restore",e=e.children("i");e.hasClass(a)?(F.fullScreen(),e.addClass(t).removeClass(a)):(F.exitScreen(),e.addClass(a).removeClass(t))},about:function(){F.popupRight({id:"LAY_adminPopupAbout",success:function(){l(this.id).render("system/about")}})},more:function(){F.popupRight({id:"LAY_adminPopupMore",success:function(){l(this.id).render("system/more")}})},back:function(){history.back()},setTheme:function(e){var a=e.data("index");e.siblings(".layui-this").data("index");e.hasClass(h)||(e.addClass(h).siblings(".layui-this").removeClass(h),F.initTheme(a))},rollPage:function(e,i){var t,n=c("#LAY_app_tabsheader"),l=n.children("li"),s=(n.prop("scrollWidth"),n.outerWidth()),r=parseFloat(n.css("left"));"left"===e?!r&&r<=0||(t=-r-s,l.each(function(e,a){a=c(a).position().left;if(t<=a)return n.css("left",-a),!1})):"auto"===e?function(){var e,t,a=l.eq(i);if(a[0]){if((e=a.position().left)<-r)return n.css("left",-e);e+a.outerWidth()>=s-r&&(t=e+a.outerWidth()-(s-r),l.each(function(e,a){a=c(a).position().left;if(0<a+r&&t<a-r)return n.css("left",-a),!1}))}}():l.each(function(e,a){var t=c(a),a=t.position().left;if(a+t.outerWidth()>=s-r)return n.css("left",-a),!1})},leftPage:function(){z.rollPage("left")},rightPage:function(){z.rollPage()},closeThisTabs:function(){F.closeThisTabs()},closeOtherTabs:function(e){var t="LAY-system-pagetabs-remove";"all"===e?(c(P+":gt(0)").remove(),c(p).find("."+g+":gt(0)").remove()):(c(P).each(function(e,a){e&&e!=F.tabsPage.index&&(c(a).addClass(t),F.tabsBody(e).addClass(t))}),c("."+t).remove())},closeAllTabs:function(){z.closeOtherTabs("all"),location.hash=""},shade:function(){F.sideFlexible()},update:function(){c.ajax({type:"get",dataType:"jsonp",data:{name:"layuiAdmin",version:F.v},url:"https://fly.layui.com/api/product_update/",success:function(e){0===e.status?e.version===F.v.replace(/\s|pro|std/g,"")?layer.alert("\u5f53\u524d\u7248\u672c\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c"):layer.alert("\u68c0\u67e5\u5230\u66f4\u65b0\uff0c\u662f\u5426\u524d\u5f80\u4e0b\u8f7d\uff1f",{btn:["\u66f4\u65b0","\u6682\u4e0d"]},function(e){layer.close(e),layer.open({type:2,content:"https://fly.layui.com/user/product/",area:["100%","100%"],title:"\u68c0\u67e5\u66f4\u65b0"})}):1==e.status?layer.alert(e.msg,{btn:["\u767b\u5165","\u6682\u4e0d"]},function(e){layer.close(e),layer.open({type:2,content:"https://fly.layui.com/user/login/",area:["100%","100%"],title:"\u68c0\u67e5\u66f4\u65b0"})}):layer.msg(e.msg||e.code,{shift:6})},error:function(e){layer.msg("\u8bf7\u6c42\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5",{shift:6})}})}};(a=layui.data(r.tableName)).theme?F.theme(a.theme):r.theme&&F.initTheme(r.theme.initColorIndex),d.addClass("layui-layout-body"),F.screen()<1&&delete r.pageTabs,r.pageTabs||y.addClass("layadmin-tabspage-none"),o.ie&&o.ie<10&&l.error("IE"+o.ie+"\u4e0b\u8bbf\u95ee\u53ef\u80fd\u4e0d\u4f73\uff0c\u63a8\u8350\u4f7f\u7528\uff1aChrome / Firefox / Edge \u7b49\u9ad8\u7ea7\u6d4f\u89c8\u5668",{offset:"auto",id:"LAY_errorIE"}),F.on("hash(side)",function(e){function s(e){return{list:e.children(".layui-nav-child"),name:e.data("name"),jump:e.data("jump")}}var a,r,o=e.path,e=c("#LAY-system-side-menu"),u="layui-nav-itemed";e.find("."+h).removeClass(h),F.screen()<2&&F.sideFlexible(),a=e.children("li"),r=F.correctRouter(o.join("/")),a.each(function(e,a){var t=c(a),l=s(t),a=l.list.children("dd"),e=o[0]==l.name||0===e&&!o[0]||l.jump&&r==F.correctRouter(l.jump);if(a.each(function(e,a){var t=c(a),i=s(t),n=i.list.children("dd"),a=o[0]==l.name&&o[1]==i.name||i.jump&&r==F.correctRouter(i.jump);if(n.each(function(e,a){var t=c(a),a=s(t);if(o[0]==l.name&&o[1]==i.name&&o[2]==a.name||a.jump&&r==F.correctRouter(a.jump)){a=a.list[0]?u:h;return t.addClass(a).siblings().removeClass(a),!1}}),a){a=i.list[0]?u:h;return t.addClass(a).siblings().removeClass(a),!1}}),e){e=l.list[0]?u:h;return t.addClass(e).siblings().removeClass(e),!1}})}),t.on("nav(layadmin-system-side-menu)",function(e){e.siblings(".layui-nav-child")[0]&&y.hasClass(k)&&(F.sideFlexible("spread"),layer.close(e.data("index"))),F.tabsPage.type="nav"}),t.on("nav(layadmin-pagetabs-nav)",function(e){e=e.parent();e.removeClass(h),e.parent().removeClass(m)});function A(e){var a=e.attr("lay-id"),t=e.attr("lay-attr"),e=e.index();location.hash=a!==r.entry&&t||"/",F.tabsBodyChange(e)}var P="#LAY_app_tabsheader>li";d.on("click",P,function(){var e=c(this),a=e.index();if(F.tabsPage.type="tab",F.tabsPage.index=a,"iframe"===e.attr("lay-attr"))return F.tabsBodyChange(a);A(e),F.runResize(),F.resizeTable()}),t.on("tabDelete(layadmin-layout-tabs)",function(e){var a=c(P+".layui-this");e.index&&F.tabsBody(e.index).remove(),A(a),F.delResize()}),d.on("click","*[lay-href]",function(){var e=c(this),a=e.attr("lay-href"),t=layui.router();F.tabsPage.elem=e,location.hash=F.correctRouter(a),F.correctRouter(a)===t.href&&F.events.refresh()}),d.on("click","*[layadmin-event]",function(){var e=c(this),a=e.attr("layadmin-event");z[a]&&z[a].call(this,e)}),d.on("mouseenter","*[lay-tips]",function(){var e,t,a,i=c(this);i.parent().hasClass("layui-nav-item")&&!y.hasClass(k)||(e=i.attr("lay-tips"),t=i.attr("lay-offset"),a=i.attr("lay-direction"),a=layer.tips(e,this,{tips:a||1,time:-1,success:function(e,a){t&&e.css("margin-left",t+"px")}}),i.data("index",a))}).on("mouseleave","*[lay-tips]",function(){layer.close(c(this).data("index"))});var T=layui.data.resizeSystem=function(){layer.closeAll("tips"),T.lock||setTimeout(function(){F.sideFlexible(F.screen()<2?"":"spread"),delete T.lock},100),T.lock=!0};u.on("resize",layui.data.resizeSystem),(o=r.request).tokenName&&((t={})[o.tokenName]=layui.data(r.tableName)[o.tokenName]||"",i.set({headers:t,where:t}),n.set({headers:t,data:t})),e("admin",F)});